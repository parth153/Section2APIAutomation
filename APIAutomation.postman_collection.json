{
	"info": {
		"_postman_id": "15cda6c8-f373-4391-b8c7-6c96d4a4b08a",
		"name": "VanguardAPIAutomation",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "GetNavPriceList",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c7a74429-a4ae-4eed-9166-8dbc69e04221",
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Body contains navPriceArray string\", function () {",
							"    pm.expect(pm.response.text()).to.include(\"navPriceArray\");",
							"});",
							"    ",
							"pm.test(\"Verify Data for First Array Object\", function () {",
							"    var jsonData = pm.response.json();",
							"    var portID = jsonData[0].portId",
							"    pm.expect(portID).to.eql('8205');",
							"    ",
							"    var navPriceArray = jsonData[0].navPriceArray[0];",
							"    pm.expect(navPriceArray.amountChange).to.eql(0.2708);",
							"    pm.expect(navPriceArray.asOfDate).to.eql(\"2019-01-24T00:00:00-05:00\");",
							"    pm.expect(navPriceArray.final).to.eql(true);",
							"    pm.expect(navPriceArray.isFinal).to.eql(true);",
							"    pm.expect(navPriceArray.percentChange).to.eql(0.37);",
							"    pm.expect(navPriceArray.price).to.eql(74.18);",
							"    pm.expect(navPriceArray.yield).to.eql(null);",
							"    ",
							"    var currency = navPriceArray.currency;",
							"    pm.expect(currency.currencyCode).to.eql(\"AUD\");",
							"    pm.expect(currency.currencyLocation).to.eql(\"L\");",
							"    pm.expect(currency.currencySymbol).to.eql(\"$\");",
							"    ",
							"    var measureType = navPriceArray.measureType;",
							"    pm.expect(measureType.measureCode).to.eql(\"NAV\");",
							"    pm.expect(measureType.measureDesc).to.eql(\"Net Asset Value\");",
							"    ",
							"    var pricePeriodType = navPriceArray.pricePeriodType;",
							"    pm.expect(pricePeriodType.pricePeriodCode).to.eql(\"DAILY\");",
							"    pm.expect(pricePeriodType.pricePeriodDesc).to.eql(\"Daily Price\");",
							"    ",
							"    var priceStatusType = navPriceArray.priceStatusType;",
							"    pm.expect(priceStatusType.priceStatusCode).to.eql(\"FINAL\");",
							"    pm.expect(priceStatusType.priceStatusDesc).to.eql(\"Final Price\");",
							"    ",
							"    console.log(jsonData[0].navPriceArray);",
							"});",
							"",
							"pm.test(\"Response time is less than 2000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(2000);",
							"});",
							"",
							"pm.test(\"Response Header Content-Type check\", function(){",
							"    ",
							"    var contentTypeHeaderExists = responseHeaders.hasOwnProperty(\"Content-Type\");",
							" ",
							"    tests[\"Has Content-Type\"] = contentTypeHeaderExists;",
							" ",
							"    if (contentTypeHeaderExists) {",
							"    tests[\"Content-Type is application/json\"] = ",
							"      responseHeaders[\"Content-Type\"].has(\"application/x-javascript\");",
							"}",
							"});",
							"",
							"pm.test(\"Validate JSON response schema\", function() {",
							"    const responseDataSchema = {",
							"  \"definitions\": {},",
							"  \"$schema\": \"http://json-schema.org/draft-07/schema#\",",
							"  \"$id\": \"http://example.com/root.json\",",
							"  \"type\": \"array\",",
							"  \"title\": \"The Root Schema\",",
							"  \"items\": {",
							"    \"$id\": \"#/items\",",
							"    \"type\": \"object\",",
							"    \"title\": \"The Items Schema\",",
							"    \"required\": [",
							"      \"portId\",",
							"      \"navPriceArray\"",
							"    ],",
							"    \"properties\": {",
							"      \"portId\": {",
							"        \"$id\": \"#/items/properties/portId\",",
							"        \"type\": \"string\",",
							"        \"title\": \"The Portid Schema\",",
							"        \"default\": \"\",",
							"        \"examples\": [",
							"          \"8205\"",
							"        ],",
							"        \"pattern\": \"^(.*)$\"",
							"      },",
							"      \"navPriceArray\": {",
							"        \"$id\": \"#/items/properties/navPriceArray\",",
							"        \"type\": \"array\",",
							"        \"title\": \"The Navpricearray Schema\",",
							"        \"items\": {",
							"          \"$id\": \"#/items/properties/navPriceArray/items\",",
							"          \"type\": \"object\",",
							"          \"title\": \"The Items Schema\",",
							"          \"required\": [",
							"            \"amountChange\",",
							"            \"asOfDate\",",
							"            \"currency\",",
							"            \"isFinal\",",
							"            \"measureType\",",
							"            \"percentChange\",",
							"            \"price\",",
							"            \"pricePeriodType\",",
							"            \"priceStatusType\",",
							"            \"yield\",",
							"            \"final\"",
							"          ],",
							"          \"properties\": {",
							"            \"amountChange\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/amountChange\",",
							"              \"type\": \"number\",",
							"              \"title\": \"The Amountchange Schema\",",
							"              \"default\": 0.0,",
							"              \"examples\": [",
							"                -0.1985",
							"              ]",
							"            },",
							"            \"asOfDate\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/asOfDate\",",
							"              \"type\": \"string\",",
							"              \"title\": \"The Asofdate Schema\",",
							"              \"default\": \"\",",
							"              \"examples\": [",
							"                \"2019-01-23T00:00:00-05:00\"",
							"              ],",
							"              \"pattern\": \"^(.*)$\"",
							"            },",
							"            \"currency\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/currency\",",
							"              \"type\": \"object\",",
							"              \"title\": \"The Currency Schema\",",
							"              \"required\": [",
							"                \"currencyCode\",",
							"                \"currencyLocation\",",
							"                \"currencySymbol\"",
							"              ],",
							"              \"properties\": {",
							"                \"currencyCode\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/currency/properties/currencyCode\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Currencycode Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"AUD\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                },",
							"                \"currencyLocation\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/currency/properties/currencyLocation\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Currencylocation Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"L\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                },",
							"                \"currencySymbol\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/currency/properties/currencySymbol\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Currencysymbol Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"$\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                }",
							"              }",
							"            },",
							"            \"isFinal\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/isFinal\",",
							"              \"type\": \"boolean\",",
							"              \"title\": \"The Isfinal Schema\",",
							"              \"default\": false,",
							"              \"examples\": [",
							"                true",
							"              ]",
							"            },",
							"            \"measureType\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/measureType\",",
							"              \"type\": \"object\",",
							"              \"title\": \"The Measuretype Schema\",",
							"              \"required\": [",
							"                \"measureCode\",",
							"                \"measureDesc\"",
							"              ],",
							"              \"properties\": {",
							"                \"measureCode\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/measureType/properties/measureCode\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Measurecode Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"NAV\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                },",
							"                \"measureDesc\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/measureType/properties/measureDesc\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Measuredesc Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"Net Asset Value\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                }",
							"              }",
							"            },",
							"            \"percentChange\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/percentChange\",",
							"              \"type\": \"number\",",
							"              \"title\": \"The Percentchange Schema\",",
							"              \"default\": 0.0,",
							"              \"examples\": [",
							"                -0.27",
							"              ]",
							"            },",
							"            \"price\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/price\",",
							"              \"type\": \"number\",",
							"              \"title\": \"The Price Schema\",",
							"              \"default\": 0.0,",
							"              \"examples\": [",
							"                73.9092",
							"              ]",
							"            },",
							"            \"pricePeriodType\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/pricePeriodType\",",
							"              \"type\": \"object\",",
							"              \"title\": \"The Priceperiodtype Schema\",",
							"              \"required\": [",
							"                \"pricePeriodCode\",",
							"                \"pricePeriodDesc\"",
							"              ],",
							"              \"properties\": {",
							"                \"pricePeriodCode\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/pricePeriodType/properties/pricePeriodCode\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Priceperiodcode Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"DAILY\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                },",
							"                \"pricePeriodDesc\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/pricePeriodType/properties/pricePeriodDesc\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Priceperioddesc Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"Daily Price\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                }",
							"              }",
							"            },",
							"            \"priceStatusType\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/priceStatusType\",",
							"              \"type\": \"object\",",
							"              \"title\": \"The Pricestatustype Schema\",",
							"              \"required\": [",
							"                \"priceStatusCode\",",
							"                \"priceStatusDesc\"",
							"              ],",
							"              \"properties\": {",
							"                \"priceStatusCode\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/priceStatusType/properties/priceStatusCode\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Pricestatuscode Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"FINAL\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                },",
							"                \"priceStatusDesc\": {",
							"                  \"$id\": \"#/items/properties/navPriceArray/items/properties/priceStatusType/properties/priceStatusDesc\",",
							"                  \"type\": \"string\",",
							"                  \"title\": \"The Pricestatusdesc Schema\",",
							"                  \"default\": \"\",",
							"                  \"examples\": [",
							"                    \"Final Price\"",
							"                  ],",
							"                  \"pattern\": \"^(.*)$\"",
							"                }",
							"              }",
							"            },",
							"            \"yield\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/yield\",",
							"              \"type\": \"null\",",
							"              \"title\": \"The Yield Schema\",",
							"              \"default\": null,",
							"              \"examples\": [",
							"                null",
							"              ]",
							"            },",
							"            \"final\": {",
							"              \"$id\": \"#/items/properties/navPriceArray/items/properties/final\",",
							"              \"type\": \"boolean\",",
							"              \"title\": \"The Final Schema\",",
							"              \"default\": false,",
							"              \"examples\": [",
							"                true",
							"              ]",
							"            }",
							"          }",
							"        }",
							"      }",
							"    }",
							"  }",
							"};",
							"",
							"    var responseData = JSON.parse(responseBody);",
							"    tests[\"responseData is valid\"] = tv4.validate(responseData, responseDataSchema); ",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://www.vanguardinvestments.com.au/retail/mvc/getNavPriceList.jsonp",
					"protocol": "https",
					"host": [
						"www",
						"vanguardinvestments",
						"com",
						"au"
					],
					"path": [
						"retail",
						"mvc",
						"getNavPriceList.jsonp"
					]
				}
			},
			"response": []
		},
		{
			"name": "GetNavPriceList_IncorrectRequest",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c7a74429-a4ae-4eed-9166-8dbc69e04221",
						"exec": [
							"pm.test(\"Status code is 404\", function () {",
							"    pm.response.to.have.status(404);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://www.vanguardinvestments.com.au/retail/mvc/getNavPrieLst.jsonp",
					"protocol": "https",
					"host": [
						"www",
						"vanguardinvestments",
						"com",
						"au"
					],
					"path": [
						"retail",
						"mvc",
						"getNavPrieLst.jsonp"
					]
				}
			},
			"response": []
		},
		{
			"name": "GetNavPriceList_IncorrectVerb",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1668b704-655f-4ff5-b0fe-1b66bd0b39fd",
						"exec": [
							"pm.test(\"Status code is 400\", function () {",
							"    pm.response.to.have.status(400);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "Anything is accepted"
				},
				"url": {
					"raw": "https://www.vanguardinvestments.com.au/retail/mvc/getNavPriceList.jsonp",
					"protocol": "https",
					"host": [
						"www",
						"vanguardinvestments",
						"com",
						"au"
					],
					"path": [
						"retail",
						"mvc",
						"getNavPriceList.jsonp"
					]
				}
			},
			"response": []
		},
		{
			"name": "GetNavPriceList_IncorrectVerb",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1668b704-655f-4ff5-b0fe-1b66bd0b39fd",
						"exec": [
							"pm.test(\"Status code is 400\", function () {",
							"    pm.response.to.have.status(400);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://www.vanguardinvestments.com.au/retail/mvc/getNavPriceList.jsonp",
					"protocol": "https",
					"host": [
						"www",
						"vanguardinvestments",
						"com",
						"au"
					],
					"path": [
						"retail",
						"mvc",
						"getNavPriceList.jsonp"
					]
				}
			},
			"response": []
		}
	]
}